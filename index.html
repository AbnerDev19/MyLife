<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Notion - Gamificado e Firebase</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="fotos/mY.png">
</head>

<body>
    <div id="sync-status" class="sync-status text-sm">
        <i class="ri-loader-4-line spin"></i> Conectando ao Banco de Dados...
    </div>

    <div class="app-layout">
        <aside class="sidebar">
            <div class="profile-section">
                <div class="avatar-container">
                    <img src="https://ui-avatars.com/api/?name=Neo+Player&background=f1f1ef&color=37352f&size=128" class="avatar" alt="Avatar">
                </div>
                <div class="profile-info">
                    <h2 id="global-name">Abner üòä</h2>
                    <p class="text-sub" id="global-level-text">Lvl 1 ‚Ä¢ XP: 0</p>
                </div>
            </div>

            <div class="sidebar-block">
                <div class="flex-between text-sm mb-1">
                    <span class="font-medium">Progresso do N√≠vel</span>
                    <span id="xp-display" class="text-sub">0 / 1000</span>
                </div>
                <div class="progress-track">
                    <div class="progress-fill xp-fill" id="xp-bar" style="width: 0%"></div>
                </div>
            </div>

            <div class="sidebar-block">
                <h3 class="sidebar-title">Estat√≠sticas de Hoje</h3>
                <ul class="stats-list">
                    <li>
                        <i class="ri-arrow-up-circle-line text-blue"></i>
                        <span>XP Ganho:</span>
                        <strong id="today-xp" style="margin-left: auto;">0</strong>
                    </li>
                    <li>
                        <i class="ri-check-line text-green"></i>
                        <span>Metas Di√°rias:</span>
                        <strong id="today-goals" style="margin-left: auto;">0/0</strong>
                    </li>
                </ul>
            </div>

            <div class="sidebar-block">
                <div class="flex-between mb-1" style="align-items: center;">
                    <h3 class="sidebar-title" style="margin:0;">Meus Atributos</h3>
                    <button class="icon-btn" id="btn-open-attr" title="Novo Atributo"><i class="ri-add-line"></i></button>
                </div>
                <div id="attributes-container" style="display: flex; flex-direction: column; gap: 12px; margin-top: 8px;">
                    </div>
            </div>

            <div class="sidebar-block history-block">
                <h3 class="sidebar-title">Hist√≥rico Recente</h3>
                <ul class="history-list" id="history-container">
                    </ul>
            </div>
        </aside>

        <main class="main-content">
            <header class="page-header">
                <h1 contenteditable="true" class="page-title" spellcheck="false">Meu Dashboard</h1>
                <p id="daily-quote" class="page-description">"A evolu√ß√£o acontece todos os dias."</p>
            </header>

            <div class="quick-actions">
                <button class="action-btn" id="btn-open-task"><i class="ri-add-line"></i> Nova Miss√£o</button>
                <button class="action-btn" id="btn-open-habit"><i class="ri-add-line"></i> Novo H√°bito</button>
                <button class="action-btn" id="btn-open-activity"><i class="ri-timer-line"></i> Nova Atividade</button>
                <button class="action-btn" id="btn-open-log"><i class="ri-edit-line"></i> Registrar A√ß√£o</button>
            </div>

            <section class="content-section">
                <div class="section-header">
                    <h2><i class="ri-timer-flash-line"></i> Atividades (Com Prazo)</h2>
                </div>
                <div class="tasks-list" id="activities-container"></div>
            </section>

            <section class="content-section">
                <div class="section-header">
                    <h2><i class="ri-checkbox-multiple-line"></i> Miss√µes do Dia</h2>
                    <span id="task-progress-text" class="text-sub text-sm">0% Conclu√≠do</span>
                </div>
                <div class="progress-track mb-3">
                    <div class="progress-fill blue-fill" id="day-progress-bar" style="width: 0%"></div>
                </div>
                <div class="tasks-list" id="tasks-container"></div>
            </section>

            <section class="content-section">
                <div class="section-header">
                    <h2><i class="ri-loop-left-line"></i> H√°bitos Di√°rios</h2>
                </div>
                <div class="habits-list" id="habits-container"></div>
            </section>
        </main>
    </div>

    <div id="modal-attr" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">Novo Atributo (Skill)</h3>
            <p class="text-sub text-sm mb-3">Crie um atributo para evoluir (ex: Programa√ß√£o, Sa√∫de, Leitura).</p>
            <div class="input-group">
                <input type="text" id="input-attr-name" class="notion-input" placeholder="Nome do atributo..." autocomplete="off">
                <span class="error-msg" id="error-attr-name"></span>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel close-attr">Cancelar</button>
                <button class="btn-primary" id="save-attr">Criar Atributo</button>
            </div>
        </div>
    </div>
    
    <div id="modal-task" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">Criar Miss√£o</h3>
            <div class="input-group">
                <input type="text" id="input-task-name" class="notion-input" placeholder="Nome da tarefa..." autocomplete="off">
                <span class="error-msg" id="error-task-name"></span>
            </div>
            <div class="input-group">
                <input type="number" id="input-task-xp" class="notion-input" placeholder="Recompensa de XP (Ex: 50)" min="1">
                <span class="error-msg" id="error-task-xp"></span>
            </div>
            <div class="input-group">
                <select id="input-task-attr" class="notion-input">
                    </select>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel close-task">Cancelar</button>
                <button class="btn-primary" id="save-task">Adicionar</button>
            </div>
        </div>
    </div>

    <div id="modal-habit" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">Novo H√°bito</h3>
            <div class="input-group">
                <input type="text" id="input-habit-name" class="notion-input" placeholder="Nome do h√°bito..." autocomplete="off">
                <span class="error-msg" id="error-habit-name"></span>
            </div>
            <div class="input-group">
                <select id="input-habit-attr" class="notion-input">
                    </select>
                <p class="text-sub text-sm mt-1">Ganha 10 XP por check.</p>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel close-habit">Cancelar</button>
                <button class="btn-primary" id="save-habit">Adicionar</button>
            </div>
        </div>
    </div>

    <div id="modal-activity" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">Nova Atividade com Prazo</h3>
            <div class="input-group">
                <input type="text" id="input-act-name" class="notion-input" placeholder="Nome da atividade..." autocomplete="off">
                <span class="error-msg" id="error-act-name"></span>
            </div>
            <div class="input-group">
                <label class="text-sub text-sm" style="display:block; margin-bottom:4px;">Prazo de Entrega:</label>
                <input type="datetime-local" id="input-act-date" class="notion-input">
                <span class="error-msg" id="error-act-date"></span>
            </div>
            <div class="input-group">
                <select id="input-act-diff" class="notion-input">
                    <option value="" disabled selected>N√≠vel de Dificuldade</option>
                    <option value="easy">F√°cil (30 XP)</option>
                    <option value="medium">M√©dio (60 XP)</option>
                    <option value="hard">Dif√≠cil (100 XP)</option>
                </select>
                <span class="error-msg" id="error-act-diff"></span>
            </div>
            <div class="input-group">
                <select id="input-act-attr" class="notion-input">
                    </select>
            </div>
            <p class="text-sub text-sm" style="color: var(--red);">* Atrasos resultam em perda do XP correspondente.</p>
            <div class="modal-actions">
                <button class="btn-cancel close-activity">Cancelar</button>
                <button class="btn-primary" id="save-activity">Adicionar</button>
            </div>
        </div>
    </div>

    <div id="modal-log" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">Registro Manual</h3>
            <div class="input-group">
                <input type="text" id="input-log-desc" class="notion-input" placeholder="O que voc√™ fez agora?" autocomplete="off">
                <span class="error-msg" id="error-log-desc"></span>
            </div>
            <div class="modal-actions">
                <button class="btn-cancel close-log">Cancelar</button>
                <button class="btn-primary" id="save-log">Registrar</button>
            </div>
        </div>
    </div>

    <script type="module" src="script.js"></script>
</body>

</html>